<div class="content mt-1 pt-1 pl-0">
   <div class="container-fluid">
      <div class="row m-0 px-0 py-1 justify-content-start sombra cabecera border">
         <div class="col-sm-12 p-0.">
            <div class="row p-0">
               <div class="input-group input-group-sm col-sm-3 mb-1 ml-0">
                  <div class="input-group-prepend">
                     <span class="input-group-text font-weight-bold" id="inputGroup-sizing-sm">Asiento</span>
                  </div>
                  <input type="text" class="form-control text-center" aria-label="Sizing example input"
                     aria-describedby="inputGroup-sizing-sm" [(ngModel)]="iAsiento.asiento" readonly>
                  <input type="text" class="form-control text-center" aria-label="Sizing example input"
                     aria-describedby="inputGroup-sizing-sm" [(ngModel)]="iAsiento.comprobante" readonly>
               </div>
               <div class="input-group input-group-sm col-sm-2 mb-1 mr-0 ">
                  <div class="input-group-prepend">
                     <span class="input-group-text font-weight-bold" id="inputGroup-sizing-sm">Fecha</span>
                  </div>
                  <input type="text" class="form-control text-center" aria-label="Sizing example input"
                     aria-describedby="inputGroup-sizing-sm" [(ngModel)]="iAsiento.fecha" readonly>
               </div>
               <div class="input-group input-group-sm col-sm-2 mb-1 ml-0">
                  <div class="input-group-prepend">
                     <span class="input-group-text font-weight-bold" id="inputGroup-sizing-sm">Doc</span>
                  </div>
                  <input type="text" class="form-control" aria-label="Sizing example input"
                     aria-describedby="inputGroup-sizing-sm" [(ngModel)]="iAsiento.documento" readonly>
               </div>
               <div class="input-group input-group-sm col-sm-5 mb-1 ml-0">
                  <div class="input-group-prepend">
                     <span class="input-group-text font-weight-bold" id="inputGroup-sizing-sm">Beneficiario</span>
                  </div>
                  <input type="text" class="form-control" aria-label="Sizing example input"
                     aria-describedby="inputGroup-sizing-sm" [(ngModel)]="iAsiento.benefi" readonly>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>

<div class="content">
   <div class="container-fluid">
      <div class="row justify-content-center">
         <div class="col-sm-9 mt-4">
            <h5 class="font-weight-bold text-center cabecera sombra border py-1">Modificar Transacción
            </h5>
            <div class="card card-body sombra fondo detalle">
               <form [formGroup]="formTransaccion">
                  <div class="row">

                     <div class="form-group col-md-3">
                        <div class="input-group input-group-sm">
                           <div class="input-group-prepend">
                              <label class="input-group-text" for="orden">Orden<sup class="green">*</sup></label>
                           </div>
                           <input type="number" class="form-control text-center" formControlName="orden" [ngClass]="{'is-invalid': f['orden'].invalid && f['orden'].touched,
                                       'is-valid': f['orden'].valid, '': f['orden'].untouched}">
                        </div>
                        <div *ngIf="authService.msgval && f['orden'].errors && f['orden'].touched">
                           <div *ngIf="f['orden'].errors['required']"
                              class="alert alert-warning m-0 py-0 px-1 pr-0 robotosmall border" role="alert">
                              <strong>Ups!</strong> El Orden es obligatorio
                           </div>
                        </div>
                     </div>

                     <div class="form-group col-md-7">
                        <div class="input-group input-group-sm">
                           <div class="input-group-prepend">
                              <label class="input-group-text">Documento<sup class="green">*</sup></label>
                           </div>
                           <select class="custom-select" formControlName="documento">
                              <option class="documentos robotosmall" *ngFor="let doc of _documentos"
                                 [ngValue]="doc.iddocumento">{{ doc.nomdoc }}
                              </option>
                           </select>
                           <input type="text" class="form-control text-center col-sm-4" formControlName="numdoc"
                              [ngClass]="{'is-invalid': f['numdoc'].invalid && f['numdoc'].touched,
                                       'is-valid': f['numdoc'].valid, '': f['numdoc'].untouched}">
                        </div>
                        <div *ngIf="authService.msgval && f['numdoc'].errors && f['numdoc'].touched">
                           <div *ngIf="f['numdoc'].errors['required']"
                              class="alert alert-warning m-0 py-0 px-1 pr-0 robotosmall border" role="alert">
                              <strong>Ups!</strong> El número de Documento es obligatorio
                           </div>
                        </div>
                     </div>

                     <div class="form-group col-md-12">
                        <div class="input-group input-group-sm">
                           <div class="input-group-prepend">
                              <label class="input-group-text" for="fecha">Cuenta<sup class="green">*</sup></label>
                           </div>
                           <input type="text" class="form-control form-control-sm col-3" formControlName="cuenta"
                              list="cuentasList" (input)="onCuentaSelected($event); cuentasxTiptran($event)"
                              [ngClass]="{'is-invalid': f['cuenta'].invalid && f['cuenta'].touched,'is-valid': f['cuenta'].valid, '': f['cuenta'].untouched}"
                              [type]="'text'">
                           <datalist role="listbox" id="cuentasList">
                              <option *ngFor="let cue of _cuentas" value={{cue.codcue}}>{{cue.nomcue}}</option>
                              <!-- {{ cue.nomcue + ' / Partida: '+ cue.asohaber}}</option> Solo para cuentas 62-->
                           </datalist>
                           <input type="text" class="form-control" formControlName="nomcue" aria-label="Small"
                              aria-describedby="inputGroup-sizing-sm" readonly tabindex="-1">
                        </div>
                        <div *ngIf="authService.msgval && f['cuenta'].errors && f['cuenta'].touched">
                           <div *ngIf="f['cuenta'].errors['required']"
                              class="alert alert-warning m-0 py-0 px-1 pr-0 robotosmall border" role="alert">
                              <strong>Ups!</strong> El código de Cuenta es obligatorio
                           </div>
                           <div *ngIf="f['cuenta'].errors['invalido']"
                              class="alert alert-warning m-0 py-0 px-1 pr-0 robotosmall border" role="alert">
                              <strong>Ups!</strong> No ha seleccionado una Cuenta
                           </div>
                        </div>
                     </div>

                     <div *ngIf="partida && partida.idpresupuesto !== null" class="form-group col-md-12">
                        <div class="input-group input-group-sm">
                           <div class="input-group-prepend">
                              <label class="input-group-text" for="fecha">Partida</label>
                           </div>
                           <input type="text" class="form-control form-control-sm col-3" formControlName="codpar"
                              readonly tabindex="-1">
                           <input type="text" class="form-control" formControlName="nompar" aria-label="Small"
                              aria-describedby="inputGroup-sizing-sm" readonly tabindex="-1">
                        </div>
                     </div>

                     <div class="form-group col-md-4">
                        <div class="input-group input-group-sm">
                           <div class="input-group-prepend">
                              <label class="input-group-text">Movimiento<sup class="green">*</sup></label>
                           </div>
                           <select class="custom-select" formControlName="debcre" [ngClass]="{'is-invalid': f['debcre'].invalid && f['debcre'].touched,
                                       'is-valid': f['debcre'].valid, '': f['debcre'].untouched}">
                              <option value=1>Débito</option>
                              <option value=2>Crédito</option>
                           </select>
                        </div>
                        <div *ngIf="authService.msgval && f['debcre'].errors && f['debcre'].touched">
                           <div *ngIf="f['debcre'].errors['required']"
                              class="alert alert-warning m-0 py-0 px-1 pr-0 robotosmall border" role="alert">
                              <strong>Ups!</strong> El Movimiento es obligatorio
                           </div>
                        </div>
                     </div>

                     <div class="form-group col-md-4">
                        <div class="input-group input-group-sm">
                           <div class="input-group-prepend">
                              <span class="input-group-text font-weight-bold ">Valor<sup class="green">*</sup></span>
                           </div>
                           <input type="text" class="form-control text-right" formControlName="valor" appVisualFormat
                              [minDecimals]="2" [maxDecimals]="2"
                              [ngClass]="{'is-invalid': f['valor'].invalid && f['valor'].touched,'is-valid': f['valor'].valid, '': f['valor'].untouched}">
                        </div>
                        <div *ngIf="authService.msgval && f['valor'].errors && f['valor'].touched">
                           <div *ngIf="f['valor'].errors['required']"
                              class="alert alert-warning m-0 py-0 px-1 pr-0 robotosmall border" role="alert">
                              <strong>Ups!</strong> El Valor es obligatoria
                           </div>
                           <div *ngIf="f['valor'].errors['min']"
                              class="alert alert-warning m-0 py-0 px-1 pr-0 robotosmall border" role="alert">
                              <strong>Ups!</strong> No puede ser un valor negativo
                           </div>
                        </div>
                     </div>

                     <div class="form-group col-md-12">
                        <div class="input-group input-group-sm">
                           <div class="input-group-prepend">
                              <label class="input-group-text">Concepto<sup class="green">*</sup></label>
                           </div>
                           <textarea class="form-control" formControlName="concepto" rows="2"
                              [ngClass]="{'is-invalid': f['concepto'].invalid && f['concepto'].touched,'is-valid': f['concepto'].valid, '': f['concepto'].untouched}">
                     </textarea>
                        </div>
                        <div *ngIf="authService.msgval && f['concepto'].errors && f['concepto'].touched">
                           <div *ngIf="f['concepto'].errors['required']"
                              class="alert alert-warning m-0 py-0  pr-0 robotosmall border" role="alert">
                              <strong>Ups!</strong> El Concepto es obligatoria
                           </div>
                        </div>
                     </div>
                  </div>

                  <div class="text-center">
                     <button type="submit" class="btn btn-success btn-sm mx-1" [disabled]="formTransaccion.pristine || !formTransaccion.valid"
                        (click)="actualizar()">
                        <i class="fa fa-check-circle"></i> Aceptar</button>
                     <button type="button" class="btn btn-outline-success btn-sm mb-0" (click)="regresar()"><i
                           class="fa fa-times-circle"></i> Cancelar
                     </button>
                  </div>
               </form>
            </div>
         </div>
      </div>
   </div>
</div>